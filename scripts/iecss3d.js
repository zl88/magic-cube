ERNO.renderers=ERNO.renderers||{},ERNO.renderers.IeCSS3D=function(){var e=THREE.Scene;return THREE.Scene=e||function(){},function(e,t){t.hideInvisibleFaces=!0;var i=new ERNO.IeCss3DRenderer(t),s=new THREE.Object3D;i.scene=s,s.add(t.autoRotateObj3D),s.add(t.camera),t.domElement=i.domElement;var n;new THREE.Vector3;return t.faces.forEach((function(e,i){(n=t[e.face].label=new THREE.CSS3DObject(document.createElement("div"))).element.classList.add("faceLabel"),n.position.copy(e.axis).multiplyScalar(t.size),n.position.negate(),n.element.innerHTML=e.face.toUpperCase(),t.object3D.add(n)})),t.right.label.rotation.y=.5*Math.PI,t.left.label.rotation.y=-.5*Math.PI,t.back.label.rotation.y=Math.PI,t.up.label.rotation.x=-.5*Math.PI,t.down.label.rotation.x=.5*Math.PI,ERNO.extend(ERNO.Cubelet.prototype,ERNO.renderers.IeCSS3DCubelet.methods),e.forEach(ERNO.renderers.IeCSS3DCubelet),requestAnimationFrame((function e(){if(t.domElement.parentNode){var n=t.domElement.parentNode.clientWidth,a=t.domElement.parentNode.clientHeight;!t.domElement.parentNode||t.domElement.clientWidth===n&&t.domElement.clientHeight===a||t.setSize(n,a),i.render(s,t.camera)}requestAnimationFrame(e)})),i}}(),ERNO.renderers.IeCSS3DCubelet=function(){var e=["axisZ","axisY","axisX","axisY","axisX","axisZ"];return function(t){t.add(t.css3DObject=new THREE.Object3D),t.faces.forEach((function(i){i.object3D=new THREE.CSS3DObject(document.createElement("div"));var s=i.element=i.object3D.element;t.css3DObject.add(i.object3D),s.classList.add("cubeletId-"+t.id),s.classList.add("face"),s.classList.add(e[i.id]),s.classList.add("face"+ERNO.Direction.getNameById(i.id).capitalize());var n=document.createElement("div");n.classList.add("wireframe"),s.appendChild(n);var a=document.createElement("div");a.classList.add("id"),s.appendChild(a);var o=document.createElement("span");if(o.classList.add("underline"),o.innerText=t.id,a.appendChild(o),i.isIntrovert)s.classList.add("faceIntroverted"),t.cube.hideInvisibleFaces&&(s.style.display="none");else{s.classList.add("faceExtroverted");var c=document.createElement("div");c.classList.add("sticker"),c.classList.add(i.color.name),s.appendChild(c);var r=document.createElement("div");r.classList.add("text"),r.innerText=i.id,i.text=r,s.appendChild(r)}})),t.front.object3D.element.classList.add("axisZ"),t.back.object3D.element.classList.add("axisZ"),t.right.object3D.element.classList.add("axisX"),t.left.object3D.element.classList.add("axisX"),t.up.object3D.element.classList.add("axisY"),t.down.object3D.element.classList.add("axisY");var i=t.size/2;t.front.object3D.position.z=i,t.up.object3D.rotation.x=-.5*Math.PI,t.up.object3D.position.y=i,t.down.object3D.rotation.x=.5*Math.PI,t.down.object3D.position.y=-i,t.left.object3D.rotation.y=-.5*Math.PI,t.left.object3D.position.x=-i,t.right.object3D.rotation.y=.5*Math.PI,t.right.object3D.position.x=i,t.front.object3D.rotation.z=0,t.front.object3D.position.z=i,t.back.object3D.rotation.y=Math.PI,t.back.object3D.position.z=-i,t.isTweening=!1,t.isEngagedX=!1,t.isEngagedY=!1,t.isEngagedZ=!1,t.show(),t.showIntroverts(),t.showPlastics(),t.showStickers(),t.hideIds(),t.hideTexts(),t.hideWireframes()}}(),ERNO.renderers.IeCSS3DCubelet.methods=function(){function e(e){e.style.display="block"}function t(e){e.style.display="none"}return{getFaceElements:function(e){var t=e||"";return Array.prototype.slice.call(this.cube.domElement.querySelectorAll(".cubeletId-"+this.id+t))},show:function(){this.getFaceElements().forEach(e),this.showing=!0},hide:function(){this.getFaceElements().forEach(t),this.showing=!1},showExtroverts:function(){this.getFaceElements(".faceExtroverted").forEach(e),this.showingExtroverts=!0},hideExtroverts:function(){this.getFaceElements(".faceExtroverted").forEach(t),this.showingExtroverts=!1},showIntroverts:(s=new THREE.Vector3,n=new THREE.Matrix4,function(t,a){i="",t&&(n.getInverse(this.matrix),s.copy(t).transformDirection(n),i=1===Math.abs(Math.round(s.x))?".axisX":1===Math.round(Math.abs(s.y))?".axisY":".axisZ"),this.getFaceElements(".faceIntroverted"+i).forEach(e),a||(this.showingIntroverts=!0)}),hideIntroverts:function(){var e,i=new THREE.Vector3,s=new THREE.Matrix4;return function(n,a){e="",n&&(s.getInverse(this.matrix),i.copy(n).transformDirection(s),e=1===Math.abs(Math.round(i.x))?".axisX":1===Math.round(Math.abs(i.y))?".axisY":".axisZ"),this.getFaceElements(".faceIntroverted"+e).forEach(t),a||(this.showingIntroverts=!1)}}(),showPlastics:function(){this.getFaceElements().forEach((function(e){e.classList.remove("faceTransparent")})),this.showingPlastics=!0},hidePlastics:function(){this.getFaceElements().forEach((function(e){e.classList.add("faceTransparent")})),this.showingPlastics=!1},hideStickers:function(){this.getFaceElements(" .sticker").forEach(t),this.showingStickers=!1},showStickers:function(){this.getFaceElements(" .sticker").forEach(e),this.showingStickers=!0},showWireframes:function(){this.getFaceElements(" .wireframe").forEach(e),this.showingWireframes=!0},hideWireframes:function(){this.getFaceElements(" .wireframe").forEach(t),this.showingWireframes=!1},showIds:function(){this.getFaceElements(" .id").forEach(e),this.showingIds=!0},hideIds:function(){this.getFaceElements(" .id").forEach(t),this.showingIds=!1},showTexts:function(){this.getFaceElements(" .text").forEach(e),this.showingTexts=!0},hideTexts:function(){this.getFaceElements(" .text").forEach(t),this.showingTexts=!1},getOpacity:function(){return this.opacity},setOpacity:function(e,t){if(this.opacityTween&&this.opacityTween.stop(),void 0===e&&(e=1),e!==this.opacity){var i=this,s=this.getFaceElements();tweenDuration=(e-this.opacity).absolute().scale(0,1,0,200),this.opacityTween=new TWEEN.Tween({opacity:this.opacity}).to({opacity:e},tweenDuration).easing(TWEEN.Easing.Quadratic.InOut).onUpdate((function(){i.opacity=this.opacity,s.forEach((function(e){e.style.opacity=i.opacity}))})).onComplete((function(){t instanceof Function&&t()})).start()}},getStickersOpacity:function(e){return parseFloat(stickerElements[0].style.opacity)},setStickersOpacity:function(e){void 0===e&&(e=.2),valueStr=e.toString(),this.getFaceElements(" .sticker").forEach((function(e){e.style.opacity=valueStr}))}};var i,s,n}();